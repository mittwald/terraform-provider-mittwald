---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "mittwald_ssh_user Resource - terraform-provider-mittwald"
subcategory: ""
description: |-
  This resource manages an SSH user for a project. SSH users can authenticate via password or SSH public keys and provide shell access to the project's file system.
---

# mittwald_ssh_user (Resource)

This resource manages an SSH user for a project. SSH users can authenticate via password or SSH public keys and provide shell access to the project's file system.

## Example Usage

```terraform
# Create an SSH user with expiration date
resource "mittwald_ssh_user" "temporary" {
  project_id  = mittwald_project.example.id
  description = "Temporary access for contractor"
  expires_at  = "2026-12-31T23:59:59Z"

  public_keys = [
    {
      key     = provider::mittwald::read_ssh_publickey("~/.ssh/id_rsa.pub")
      comment = "contractor@company.com"
    }
  ]
}
```

```terraform
# Create an SSH user with password authentication

variable "ssh_admin_password" {
  sensitive = true
  type      = string
}

resource "mittwald_ssh_user" "admin" {
  project_id          = mittwald_project.example.id
  description         = "Admin SSH user"
  password_wo         = var.ssh_admin_password
  password_wo_version = 1
}
```

```terraform
# Create an SSH user with public key authentication
resource "mittwald_ssh_user" "deploy" {
  project_id  = mittwald_project.example.id
  description = "Deployment SSH user"

  public_keys = [
    {
      key     = provider::mittwald::read_ssh_publickey("~/.ssh/id_rsa.pub")
      comment = "deploy@example.com"
    }
  ]
}

# Output the generated username for use in CI/CD pipelines
output "deploy_ssh_username" {
  value = mittwald_ssh_user.deploy.username
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `description` (String) A description for the SSH user
- `project_id` (String) The ID of the project the SSH user belongs to

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `active` (Boolean) Whether the SSH user is active. Defaults to `true`.
- `expires_at` (String) The expiration date of the SSH user in RFC3339 format (e.g., `2024-12-31T23:59:59Z`). If not set, the user does not expire.
- `password_wo` (String, Sensitive, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) Password for SSH authentication. Either `password_wo` or `public_keys` must be provided. Maximum 72 characters.
- `password_wo_version` (Number) Version of the password. You must increment this value whenever the password is changed to trigger an update.
- `public_keys` (Attributes Set) Set of SSH public keys for authentication. Either `public_keys` or `password_wo` must be provided. (see [below for nested schema](#nestedatt--public_keys))

### Read-Only

- `created_at` (String) The creation timestamp of the SSH user in RFC3339 format
- `id` (String) The generated SSH user ID
- `username` (String) The generated username for SSH authentication. This is automatically generated by the API and cannot be changed.

<a id="nestedatt--public_keys"></a>
### Nested Schema for `public_keys`

Required:

- `comment` (String) A comment/label for the key (e.g., email address or identifier)
- `key` (String) The SSH public key (e.g., `ssh-rsa AAAA... user@host`). When reading this value from a file, use the `provider::mittwald::read_ssh_publickey` function instead of the regular file function. The API expects the key to be in the format `<key-type> <base64-key>`, without any trailing comment or whitespace. The `read_ssh_publickey` function will handle stripping the comment and whitespace for you.
