---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "mittwald_app Resource - terraform-provider-mittwald"
subcategory: ""
description: |-
  Models an app installation on the mittwald platform
---

# mittwald_app (Resource)

Models an app installation on the mittwald platform

## Example Usage

```terraform
variable "admin_password" {
  description = "The password for the admin user of the wordpress app"
  type        = string
  sensitive   = true
}

data "mittwald_systemsoftware" "php" {
  name     = "php"
  selector = "^8.2"
}

data "mittwald_systemsoftware" "composer" {
  name        = "composer"
  recommended = true
}

data "mittwald_systemsoftware" "mysql" {
  name        = "composer"
  recommended = true
}

resource "mittwald_app" "wordpress" {
  project_id = mittwald_project.foobar.id

  app     = "wordpress"
  version = "6.3.1"

  description   = "Martins Test-App"
  update_policy = "patchlevel"

  user_inputs = {
    "site_title"  = "My awesome site"
    "admin_user"  = "martin"
    "admin_pass"  = var.admin_password
    "admin_email" = "martin@mittwald.example"
  }
}

resource "mittwald_app" "custom_php" {
  project_id = mittwald_project.foobar.id

  app     = "php"
  version = "1.0.0"

  description   = "Martins Test-App"
  document_root = "/public"
  update_policy = "none"

  databases = [
    {
      kind    = "mysql"
      purpose = "primary"
      id      = mittwald_mysql_database.foobar_database.id
      user_id = mittwald_mysql_database.foobar_database.user.id
    }
  ]

  dependencies = {
    (data.mittwald_systemsoftware.php.name) = {
      version       = data.mittwald_systemsoftware.php.version
      update_policy = "patchLevel"
    }
    (data.mittwald_systemsoftware.composer.name) = {
      version       = data.mittwald_systemsoftware.composer.version
      update_policy = "patchLevel"
    },
    (data.mittwald_systemsoftware.mysql.name) = {
      version       = data.mittwald_systemsoftware.mysql.version
      update_policy = "patchLevel"
    },
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app` (String) The name of the app
- `project_id` (String) The ID of the project the app belongs to
- `update_policy` (String) The update policy of the app; one of `none`, `patchLevel` or `all`
- `version` (String) The desired version of the app

### Optional

- `databases` (Attributes Set) The databases the app uses.

    You can use this field to link databases to the app. The database resources must be created before the app resource, and the database resources must have the same project ID as the app resource.

    This is only necessary if the specific app is not implicitly linked to a database by the backend. This is the case for apps like WordPress or TYPO3, which are always linked to a database. In these cases, you can (or should, even) omit the `databases` attribute. You can still retrieve the linked databases from the observed state, but you should not manage them manually. (see [below for nested schema](#nestedatt--databases))
- `dependencies` (Attributes Map) The dependencies of the app.

    You can omit these to use the suggested dependencies for the app (in which case you can later select the dependencies from the resource state).

    If you specify dependencies, you must specify the exact version of the dependency. To select a version using a semantic versioning constraint, use the `mittwald_systemsoftware` data source. (see [below for nested schema](#nestedatt--dependencies))
- `description` (String) The description of the app
- `document_root` (String) The document root of the app
- `user_inputs` (Map of String) The user inputs of the app

### Read-Only

- `id` (String) The ID of the app
- `installation_path` (String) The installation path of the app, relative to the web root
- `installation_path_absolute` (String) The absolute installation path of the app, including the web root
- `short_id` (String) The short ID of the app
- `ssh_host` (String) The SSH host of the app; this will be populated after the app has been installed. You can use it for declaring a [provisioner](https://developer.hashicorp.com/terraform/language/resources/provisioners/connection) for your app.
- `version_current` (String) The current version of the app

<a id="nestedatt--databases"></a>
### Nested Schema for `databases`

Required:

- `id` (String) The ID of the database
- `kind` (String) The kind of the database; one of `mysql` or `redis`
- `purpose` (String) The purpose of the database; use 'primary' for the primary data storage, or 'cache' for a cache database
- `user_id` (String) The ID of the database user that the app should use


<a id="nestedatt--dependencies"></a>
### Nested Schema for `dependencies`

Required:

- `update_policy` (String) The update policy of the dependency; one of `none`, `patchLevel` or `all`
- `version` (String) The version of the dependency; please take note that this must be an *exact* version string; to select a version using a semantic versioning constraint, use the `mittwald_systemsoftware` data source.
